<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<title>Course de voitures</title>
	<script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="h-screen flex flex-col overflow-hidden">

<header class="flex items-center justify-between p-4 bg-indigo-600 text-white">
	<h1 class="text-2xl font-bold">🏁 Course de voitures</h1>

	<div class="space-x-2">
		<button id="fullBtn" class="px-3 py-1 rounded bg-white/20 hover:bg-white/30">Démarrer une course entière
		</button>
		<button id="stepBtn" class="px-3 py-1 rounded bg-white/20 hover:bg-white/30">Prochain tour</button>
		<button id="resetBtn" class="px-3 py-1 rounded bg-white/20 hover:bg-white/30">Recommencer</button>

		<a href="/static/cars.html" class="px-3 py-1 rounded bg-white/20 hover:bg-white/30">Voitures</a>
		<button id="rulesBtn" class="px-3 py-1 rounded bg-white/20 hover:bg-white/30">Paramètres</button>
	</div>
</header>

<main class="flex-1 flex min-h-0">
	<section class="w-1/3 overflow-y-auto p-4 border-r">
		<div id="cars" class="flex flex-col gap-4"></div>
	</section>

	<section class="w-2/3 bg-gray-100 p-4 flex flex-col min-h-0">
		<div class="flex items-center justify-between mb-2">
			<h2 class="text-lg font-semibold">Journal de course</h2>
			<label class="text-sm">
				Filtre :
				<select id="filter" class="px-2 py-1 rounded border text-sm">
					<option value="">Toutes</option>
				</select>
			</label>
		</div>

		<pre id="logBox" class="flex-1 overflow-hidden bg-white rounded-lg shadow p-3 text-sm"></pre>

		<div class="flex justify-between mt-2">
			<button id="prev" class="px-3 py-1 bg-indigo-600 text-white rounded disabled:opacity-40">◀ Précédent
			</button>
			<button id="next" class="px-3 py-1 bg-indigo-600 text-white rounded disabled:opacity-40">Suivant ▶</button>
		</div>
	</section>
</main>

<div id="rulesModal" class="fixed inset-0 bg-black/50 hidden items-center justify-center">
	<div class="bg-white rounded-xl p-6 w-80 space-y-3 overflow-y-auto max-h-[90vh] relative">
		<h3 class="text-lg font-semibold mb-2">Paramètres de la course</h3>

		<template id="ruleInput">
			<label class="block text-sm">
				<span class="rule-name"></span>
				<input type="number" step="any" class="rule-value w-full border p-1 rounded">
			</label>
		</template>

		<div id="rulesForm" class="space-y-2"></div>

		<div class="flex gap-2 justify-end mt-2">
			<button id="saveRules" class="px-3 py-1 bg-indigo-600 text-white rounded">Enregistrer</button>
		</div>
		<button id="closeRulesModal" class="absolute top-2 right-3 text-xl">✕</button>
	</div>
</div>

<script src="/static/index.js"></script>
</body>
</html>
